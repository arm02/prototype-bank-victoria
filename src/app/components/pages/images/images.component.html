<div class="investor-trust__images-header">
  <div class="search-box">
    <input
      type="text"
      class="form-control"
      (keyup.enter)="getAllImage()"
      [(ngModel)]="query"
      placeholder="Search Here ..."
      id="search"
    />
    <button class="btn-primary" (click)="getAllImage()">
      <i class="fa fa-search" aria-hidden="true"></i>
    </button>
  </div>
  <button class="btn-primary btn-add" (click)="createImage()">
    Add New Data
  </button>
</div>
<div class="investor-trust__images-filter">
  <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Date</mat-label>
    <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
      <input matStartDate formControlName="start" placeholder="Start Date " />
      <input matEndDate formControlName="end" placeholder="End date" />
    </mat-date-range-input>
    <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-date-range-picker #picker>
      <mat-date-range-picker-actions>
        <button mat-button matDatepickerCancel>Cancel</button>
        <button
          mat-raised-button
          color="primary"
          (click)="getAllImage()"
          matDatepickerApply
        >
          Apply
        </button>
      </mat-date-range-picker-actions>
    </mat-date-range-picker>

    <mat-error *ngIf="range.controls.start.hasError('matStartDateInvalid')"
      >Invalid start date</mat-error
    >
    <mat-error *ngIf="range.controls.end.hasError('matEndDateInvalid')"
      >Invalid end date</mat-error
    >
  </mat-form-field>
  <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Type</mat-label>
    <mat-select [(ngModel)]="type" (ngModelChange)="getAllImage()">
      <mat-option>None</mat-option>
      <mat-option [value]="'image'">Image</mat-option>
      <mat-option [value]="'video'">Video</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Upload By</mat-label>
    <mat-select [(ngModel)]="userId" (ngModelChange)="getAllImage()">
      <mat-option>
        <ngx-mat-select-search
          [(ngModel)]="querySearchUser"
          placeholderLabel="Search Writer by Name ..."
          (ngModelChange)="getAllUser()"
        ></ngx-mat-select-search>
      </mat-option>
      <mat-option>None</mat-option>
      <mat-option *ngFor="let opt of users" [value]="opt.user_id">
        {{ opt.name }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Sort By</mat-label>
    <mat-select [(ngModel)]="sortBy.value" (ngModelChange)="getAllImage()">
      <mat-option [value]="'title'">Title</mat-option>
      <mat-option [value]="'type'">Type</mat-option>
      <mat-option [value]="'source'">Source</mat-option>
      <mat-option [value]="'imageDesc'">Caption</mat-option>
      <mat-option [value]="'updatedAt'">Updated At</mat-option>
      <mat-option [value]="'createdAt'">Created At</mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field appearance="outline" style="width: 100%">
    <mat-label>Sort Type</mat-label>
    <mat-select [(ngModel)]="sortBy.type" (ngModelChange)="getAllImage()">
      <mat-option [value]="'ASC'">A-Z</mat-option>
      <mat-option [value]="'DESC'">Z-A</mat-option>
    </mat-select>
  </mat-form-field>
</div>
<app-table
  [sourceData]="images"
  [rowCount]="rowCount"
  [pageSize]="limit"
  [displayedColumns]="displayedColumns"
  (paginateEvent)="paginateEvent($event)"
  (deleteEvent)="deleteImage($event)"
  (copyEvent)="copyImage($event)"
  (editEvent)="editImage($event)"
></app-table>
